function generateWrappper(t,e){for(var n={imports:{},deployFn:"",viewFn:[],txFn:[],eventFn:[],eventStruct:[]},s=t+"Wrapper",r=0;r<e.length;r++){var u=e[r];"constructor"===u.type?n.deployFn=makeDeployFunction(u,n,s,"    "):"function"===u.type?"view"===u.stateMutability||"pure"===u.stateMutability?n.viewFn.push(makeViewFunction(u,n,"    ")):n.txFn.push(makeTransactionFunction(u,n,"    ",t)):"event"===u.type&&(n.eventStruct.push(makeEventStruct(u,n,"")),n.eventFn.push(makeEventFunc(u,n,"    ")))}n.imports.SmartContractInterface=!0,n.imports.AddressLike=!0,n.imports.RPCOptions=!0,n.imports.ABILike=!0,n.imports.SmartContractEvent=!0;var p=[];p.push("// "+t+" contract wrapper"),p.push(""),p.push('"use strict";'),p.push(""),p.push("import { "+Object.keys(n.imports).join(", ")+' } from "@asanrom/smart-contract-wrapper";'),p.push(""),p.push("export class "+s+" {"),p.push("    private _contractInterface: SmartContractInterface;"),p.push(""),p.push(n.deployFn),p.push(""),p.push("    constructor(address: AddressLike, rpcOptions: RPCOptions) {"),p.push("        this._contractInterface = new SmartContractInterface(address, CONTRACT_ABI, rpcOptions);"),p.push("    }");for(r=0;r<n.viewFn.length;r++)p.push(""),p.push(n.viewFn[r]);for(r=0;r<n.txFn.length;r++)p.push(""),p.push(n.txFn[r]);p.push("}"),p.push(""),p.push("export class "+t+"EventCollection {"),p.push("    public events: SmartContractEvent[];"),p.push("    constructor(events: SmartContractEvent[]) {"),p.push("        this.events = events;"),p.push("    }");for(r=0;r<n.eventFn.length;r++)p.push(""),p.push(n.eventFn[r]);p.push("}");for(r=0;r<n.eventStruct.length;r++)p.push(""),p.push(n.eventStruct[r]);return p.push(""),p.push("const CONTRACT_ABI: ABILike = "+JSON.stringify(e,null,"    ")+";"),p.join("\n")+"\n"}function makeDeployFunction(t,e,n,s){var r=[],u=makeFunctionParams(t.inputs,e);return t.payable&&(e.imports.QuantityLike=!0,u.push("value: QuantityLike")),e.imports.BytesLike=!0,u.push("bytecode: BytesLike"),e.imports.TransactionSendingOptions=!0,u.push("options: TransactionSendingOptions"),e.imports.deploySmartContract=!0,r.push("public static async deploy("+u.join(", ")+"): Promise<"+n+"> {"),r.push("    const deployed = await deploySmartContract(bytecode, CONTRACT_ABI, ["+t.inputs.map(function(t){return t.name}).join(", ")+"], "+(t.payable?"value":"0")+", options);"),r.push("    if (deployed.receipt.status > BigInt(0)) {"),r.push("        return new "+n+"(deployed.result, options);"),r.push("    } else {"),r.push('        throw new Error("Transaction reverted");'),r.push("    }"),r.push("}"),r.map(function(t){return s+t}).join("\n")}function makeFunctionParams(t,e){return t.map(function(t){return t.name+": "+getABITypescriptType(t.type,e,!0)})}function getABITypescriptType(t,e,n){var s,r=/\[([0-9]+)?\]$/.exec(t+="");if(r?(s=!0,t=t.substr(0,t.length-r[0].length)):s=!1,"address"===t)return n?(e.imports.AddressLike=!0,"AddressLike"+(s?"[]":"")):(e.imports.Address=!0,"Address"+(s?"[]":""));if("string"===t)return"string"+(s?"[]":"");if("bool"===t)return"boolean"+(s?"[]":"");if(/^(u)?int([0-9]+)?$/.test(t))return n?(e.imports.QuantityLike=!0,"QuantityLike"+(s?"[]":"")):(e.imports.Quantity=!0,"Quantity"+(s?"[]":""));if(/^bytes([0-9]+)?$/.test(t))return n?(e.imports.BytesLike=!0,"BytesLike"+(s?"[]":"")):(e.imports.Bytes=!0,"Bytes"+(s?"[]":""));if(/^\(.*\)$/.test(t)){for(var u=t.substr(1,t.length-1),p="",i=0,o=[],a=0;a<u.length;a++){var c=u.charAt(a);"("===c?(p+=c,i++):")"===c?(p+=c,i--):","===c&&0===i?(o.push(p),p=""):p+=c}return p&&o.push(p),"["+o.map(function(t){return getABITypescriptType(t,e,n)}).join(", ")+"]"}}function makeFunctionResultType(t,e,n){return"void"===e?"void":"single"===e?getABITypescriptType(t[0].type,n,!1):"tuple"===e?"["+t.map(function(t){return getABITypescriptType(t.type,n,!1)}).join(", ")+"]":"struct"===e?"{"+t.map(function(t){return t.name+": "+getABITypescriptType(t.type,n,!1)}).join(", ")+"}":"any"}function makeViewFunction(t,e,n){var s,r=[],u=makeFunctionParams(t.inputs,e);if(e.imports.MethodCallingOptions=!0,u.push("options?: MethodCallingOptions"),0===t.outputs.length)s="void";else if(1===t.outputs.length)s="single";else{s="struct";for(var p=0;p<t.outputs.length;p++)if(!t.outputs[p].name){s="tuple";break}}if(r.push("public async "+t.name+"("+u.join(", ")+"): Promise<"+makeFunctionResultType(t.outputs,s,e)+"> {"),r.push("    "+("void"===s?"":"const result: any = ")+'await this._contractInterface.callViewMethod("'+t.name+'", ['+t.inputs.map(function(t){return t.name}).join(", ")+"], options || {});"),"single"===s)r.push("    return result[0]");else if("tuple"===s)r.push("    return result");else if("struct"===s){r.push("    return {");for(p=0;p<t.outputs.length;p++){var i=t.outputs[p];r.push("        "+i.name+": result["+p+"],")}r.push("    };")}return r.push("}"),r.map(function(t){return n+t}).join("\n")}function makeTransactionFunction(t,e,n,s){var r=[],u=s+"EventCollection",s=makeFunctionParams(t.inputs,e);return t.payable&&(e.imports.QuantityLike=!0,s.push("value: QuantityLike")),e.imports.MethodTransactionOptions=!0,s.push("options: MethodTransactionOptions"),e.imports.SmartContractEvent=!0,e.imports.TransactionResult=!0,r.push("public async "+t.name+"("+s.join(", ")+"): Promise<TransactionResult<"+u+">> {"),t.payable?r.push('    const result = await this._contractInterface.callPayableMethod("'+t.name+'", ['+t.inputs.map(function(t){return t.name}).join(", ")+"], value, options);"):r.push('    const result = await this._contractInterface.callMutableMethod("'+t.name+'", ['+t.inputs.map(function(t){return t.name}).join(", ")+"], options);"),r.push(""),r.push("    if (result.receipt.status > BigInt(0)) {"),r.push("        const decodedEvents = this._contractInterface.parseTransactionLogs(result.receipt.logs)"),r.push("        return { receipt: result.receipt, result: new "+u+"(decodedEvents) };"),r.push("    } else {"),r.push('        throw new Error("Transaction reverted");'),r.push("    }"),r.push("}"),r.map(function(t){return n+t}).join("\n")}function makeEventStruct(t,e,n){var s=[];s.push("export interface "+t.name+"Event {");for(var r=0;r<t.inputs.length;r++){var u=t.inputs[r];s.push("    "+(u.name||"_"+r)+": "+getABITypescriptType(u.type,e,!1)+",")}return s.push("}"),s.map(function(t){return n+t}).join("\n")}function makeEventFunc(t,e,n){var s=[];s.push("public find"+t.name+"Event(): "+t.name+"Event | null {"),s.push("    for (let event of this.events) {"),s.push('        if (event.name === "'+t.name+'") {'),s.push("            const result: any = event.parameters;"),s.push("            return {");for(var r=0;r<t.inputs.length;r++){var u=t.inputs[r];s.push("                "+u.name+": result["+r+"],")}return s.push("            }"),s.push("        }"),s.push("    }"),s.push("    return null;"),s.push("}"),s.map(function(t){return n+t}).join("\n")}