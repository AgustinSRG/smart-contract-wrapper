function generateWrapper(t,e){for(var n={imports:{},deployFn:"",viewFn:[],txFn:[],eventFn:[],eventStruct:[],eventTypes:[]},s=t+"Wrapper",r=Object.create(null),i=Object.create(null),u=Object.create(null),p=0;p<e.length;p++)"function"===(a=e[p]).type&&(u[a.name]&&(r[a.name]=!0,i[a.name]=0),u[a.name]=!0);for(var a,p=0;p<e.length;p++)"constructor"===(a=e[p]).type?n.deployFn=makeDeployFunction(a,n,s,"    "):"function"===a.type?"view"===a.stateMutability||"pure"===a.stateMutability?n.viewFn.push(makeViewFunction(a,n,"    ",r[a.name],i)):n.txFn.push(makeTransactionFunction(a,n,"    ",t,r[a.name],i)):"event"===a.type&&(n.eventTypes.push(a.name),n.eventStruct.push(makeEventStruct(a,n,"")),n.eventFn.push(makeEventFunc(a,n,"    ")));n.imports.SmartContractInterface=!0,n.imports.TransactionBuildDetails=!0,n.imports.AddressLike=!0,n.imports.Address=!0,n.imports.QuantityLike=!0,n.imports.BlockTag=!0,n.imports.RPCOptions=!0,n.imports.ABILike=!0,n.imports.SmartContractEvent=!0;var o=[];o.push("// "+t+" contract wrapper"),o.push(""),o.push('"use strict";'),o.push(""),o.push("import { "+Object.keys(n.imports).join(", ")+' } from "@asanrom/smart-contract-wrapper";'),o.push(""),o.push("export class "+s+" {"),o.push("    public address: Address;"),o.push("    private _contractInterface: SmartContractInterface;"),o.push(""),o.push(n.deployFn),o.push(""),o.push("    constructor(address: AddressLike, rpcOptions: RPCOptions) {"),o.push("        this._contractInterface = new SmartContractInterface(address, CONTRACT_ABI, rpcOptions);"),o.push("        this.address = this._contractInterface.address;"),o.push("    }");for(p=0;p<n.viewFn.length;p++)o.push(""),o.push(n.viewFn[p]);for(p=0;p<n.txFn.length;p++)o.push(""),o.push(n.txFn[p]);o.push(""),o.push("    public async findEvents(fromBlock: QuantityLike | BlockTag, toBlock: QuantityLike | BlockTag): Promise<"+t+"EventCollection> {"),o.push("        const events = await this._contractInterface.findEvents(fromBlock, toBlock);"),o.push("        return new "+t+"EventCollection(events);"),o.push("    }"),o.push("}"),o.push(""),o.push("export type "+t+"EventType = "+(n.eventTypes.map(function(t){return JSON.stringify(t)}).join(" | ")||'"string"')+";"),o.push(""),o.push("export class "+t+"EventCollection {"),o.push("    public events: SmartContractEvent[];"),o.push("    constructor(events: SmartContractEvent[]) {"),o.push("        this.events = events;"),o.push("    }"),o.push(""),o.push("    public length(): number {"),o.push("        return this.events.length"),o.push("    }"),o.push(""),o.push("    public getEventType(index: number): "+t+"EventType {"),o.push("        return <any>this.events[index].name"),o.push("    }"),o.push(""),o.push("    public filter(eventType: "+t+"EventType): "+t+"EventCollection {"),o.push("        return new "+t+"EventCollection(this.events.filter(event => event.name === eventType));"),o.push("    }");for(p=0;p<n.eventFn.length;p++)o.push(""),o.push(n.eventFn[p]);o.push("}");for(p=0;p<n.eventStruct.length;p++)o.push(""),o.push(n.eventStruct[p]);return o.push(""),o.push("const CONTRACT_ABI: ABILike = "+JSON.stringify(e,null,"    ")+";"),o.join("\n")+"\n"}function makeDeployFunction(t,e,n,s){var r=[],i=makeFunctionParams(t.inputs,e);return t.payable&&(e.imports.QuantityLike=!0,i.push("value: QuantityLike")),e.imports.BytesLike=!0,i.push("bytecode: BytesLike"),e.imports.TransactionSendingOptions=!0,i.push("options: TransactionSendingOptions"),e.imports.deploySmartContract=!0,r.push("public static async deploy("+i.join(", ")+"): Promise<"+n+"> {"),r.push("    const deployed = await deploySmartContract(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+", options);"),r.push("    if (deployed.receipt.status > BigInt(0)) {"),r.push("        return new "+n+"(deployed.result, options);"),r.push("    } else {"),r.push('        throw new Error("Transaction reverted");'),r.push("    }"),r.push("}"),r.push(""),e.imports.getTxBuildDetailsForDeploy=!0,r.push("public static getDeployTxBuildDetails("+i.slice(0,i.length-1).join(", ")+"): TransactionBuildDetails {"),r.push("    return getTxBuildDetailsForDeploy(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+");"),r.push("}"),r.map(function(t){return s+t}).join("\n")}function makeFunctionParams(t,n){return t.map(function(t,e){return(t.name||"param_"+e)+": "+getABITypescriptType(t.type,n,!0)})}function getCallArgumentsList(t){return t.inputs.map(function(t,e){return t.name||"param_"+e}).join(", ")}function getABITypescriptType(t,e,n){var s,r=/\[([0-9]+)?\]$/.exec(t+="");if(r?(s=!0,t=t.substr(0,t.length-r[0].length)):s=!1,"address"===t)return n?(e.imports.AddressLike=!0,"AddressLike"+(s?"[]":"")):(e.imports.Address=!0,"Address"+(s?"[]":""));if("string"===t)return"string"+(s?"[]":"");if("bool"===t)return"boolean"+(s?"[]":"");if(/^(u)?int([0-9]+)?$/.test(t))return n?(e.imports.QuantityLike=!0,"QuantityLike"+(s?"[]":"")):(e.imports.Quantity=!0,"Quantity"+(s?"[]":""));if(/^bytes([0-9]+)?$/.test(t))return n?(e.imports.BytesLike=!0,"BytesLike"+(s?"[]":"")):"string"+(s?"[]":"");if(/^\(.*\)$/.test(t)){for(var i=t.substr(1,t.length-1),u="",p=0,a=[],o=0;o<i.length;o++){var c=i.charAt(o);"("===c?(u+=c,p++):")"===c?(u+=c,p--):","===c&&0===p?(a.push(u),u=""):u+=c}return u&&a.push(u),"["+a.map(function(t){return getABITypescriptType(t,e,n)}).join(", ")+"]"}}function makeFunctionResultType(t,e,n){return"void"===e?"void":"single"===e?getABITypescriptType(t[0].type,n,!1):"tuple"===e?"["+t.map(function(t){return getABITypescriptType(t.type,n,!1)}).join(", ")+"]":"struct"===e?"{"+t.map(function(t){return t.name+": "+getABITypescriptType(t.type,n,!1)}).join(", ")+"}":"any"}function makeViewFunction(t,e,n,s,r){var i,u=[],p=makeFunctionParams(t.inputs,e);if(e.imports.MethodCallingOptions=!0,p.push("options?: MethodCallingOptions"),0===t.outputs.length)i="void";else if(1===t.outputs.length)i="single";else{i="struct";for(var a=0;a<t.outputs.length;a++)if(!t.outputs[a].name){i="tuple";break}}var o=t.name;if(s&&(o+="__"+r[t.name],r[t.name]++,e.imports.FunctionFragment=!0),u.push("public async "+o+"("+p.join(", ")+"): Promise<"+makeFunctionResultType(t.outputs,i,e)+"> {"),u.push("    "+("void"===i?"":"const result: any = ")+"await this._contractInterface.callViewMethod("+sanitizeMethodEntry(t,s)+", ["+getCallArgumentsList(t)+"], options || {});"),"single"===i)u.push("    return result[0]");else if("tuple"===i)u.push("    return result");else if("struct"===i){u.push("    return {");for(a=0;a<t.outputs.length;a++){var c=t.outputs[a];u.push("        "+c.name+": result["+a+"],")}u.push("    };")}return u.push("}"),u.map(function(t){return n+t}).join("\n")}function makeTransactionFunction(t,e,n,s,r,i){var u=[],p=s+"EventCollection",a=makeFunctionParams(t.inputs,e);t.payable&&(e.imports.QuantityLike=!0,a.push("value: QuantityLike")),e.imports.MethodTransactionOptions=!0,a.push("options: MethodTransactionOptions"),e.imports.SmartContractEvent=!0,e.imports.TransactionResult=!0;s=t.name;return r&&(s+="__"+i[t.name],i[t.name]++,e.imports.FunctionFragment=!0),u.push("public async "+s+"("+a.join(", ")+"): Promise<TransactionResult<"+p+">> {"),t.payable?u.push("    const result = await this._contractInterface.callPayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value, options);"):u.push("    const result = await this._contractInterface.callMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], options);"),u.push(""),u.push("    if (result.receipt.status > BigInt(0)) {"),u.push("        const decodedEvents = this._contractInterface.parseTransactionLogs(result.receipt.logs)"),u.push("        return { receipt: result.receipt, result: new "+p+"(decodedEvents) };"),u.push("    } else {"),u.push('        throw new Error("Transaction reverted");'),u.push("    }"),u.push("}"),u.push(""),u.push("public "+s+"$txBuildDetails("+a.slice(0,a.length-1).join(", ")+"): TransactionBuildDetails {"),t.payable?u.push("    return this._contractInterface.encodePayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value);"):u.push("    return this._contractInterface.encodeMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"]);"),u.push("}"),u.map(function(t){return n+t}).join("\n")}function makeEventStruct(t,e,n){var s=[];s.push("export interface "+t.name+"Event {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("    "+(i.name||"_"+r)+": "+getABITypescriptType(i.type,e,!1)+",")}return s.push("}"),s.map(function(t){return n+t}).join("\n")}function makeEventFunc(t,e,n){var s=[];e.imports.SmartContractEventWrapper=!0,e.imports.SmartContractEvent=!0,s.push("public get"+t.name+"Event(index: number): SmartContractEventWrapper<"+t.name+"Event> {"),s.push("    const result: any = this.events[index].parameters;"),s.push("    return {"),s.push("        event: this.events[index],"),s.push("        data: {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("            "+i.name+": result["+r+"],")}return s.push("        },"),s.push("    };"),s.push("}"),s.map(function(t){return n+t}).join("\n")}function sanitizeMethodEntry(t,e){return e?"FunctionFragment.fromObject("+JSON.stringify(t)+")":JSON.stringify(t.name)}