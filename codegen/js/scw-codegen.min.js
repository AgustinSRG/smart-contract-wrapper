function generateWrapper(t,e,n){for(var s={imports:{},deployFn:"",viewFn:[],txFn:[],eventFn:[],eventStruct:[],eventTypes:[]},r=t+"Wrapper",i=Object.create(null),u=Object.create(null),p=Object.create(null),a=0;a<e.length;a++)"function"===(o=e[a]).type&&(p[o.name]&&(i[o.name]=!0,u[o.name]=0),p[o.name]=!0);for(var o,c=!1,a=0;a<e.length;a++)"constructor"===(o=e[a]).type?(c=!0,s.deployFn=makeDeployFunction(o,s,r,"    ",n)):"function"===o.type?"view"===o.stateMutability||"pure"===o.stateMutability?s.viewFn.push(makeViewFunction(o,s,"    ",i[o.name],u)):s.txFn.push(makeTransactionFunction(o,s,"    ",t,i[o.name],u,n)):"event"===o.type&&(s.eventTypes.push(o.name),s.eventStruct.push(makeEventStruct(o,s,"")),s.eventFn.push(makeEventFunc(o,s,"    ")));c||(s.deployFn=makeDeployFunction({inputs:[],stateMutability:"nonpayable",type:"constructor"},s,r,"    ",n)),s.imports.SmartContractInterface=!0,n||(s.imports.TransactionBuildDetails=!0),s.imports.AddressLike=!0,s.imports.Address=!0,s.imports.QuantityLike=!0,s.imports.BlockTag=!0,s.imports.RPCOptions=!0,s.imports.ABILike=!0,s.imports.SmartContractEvent=!0;var h=[];h.push("// "+t+" contract wrapper"),h.push(""),h.push('"use strict";'),h.push(""),h.push("import { "+Object.keys(s.imports).join(", ")+' } from "@asanrom/smart-contract-wrapper";'),h.push(""),h.push("export class "+r+" {"),h.push("    public address: Address;"),h.push("    private _contractInterface: SmartContractInterface;"),h.push(""),h.push(s.deployFn),h.push(""),h.push("    constructor(address: AddressLike, rpcOptions: RPCOptions) {"),h.push("        this._contractInterface = new SmartContractInterface(address, CONTRACT_ABI, rpcOptions);"),h.push("        this.address = this._contractInterface.address;"),h.push("    }");for(a=0;a<s.viewFn.length;a++)h.push(""),h.push(s.viewFn[a]);for(a=0;a<s.txFn.length;a++)h.push(""),h.push(s.txFn[a]);h.push(""),h.push("    public async findEvents(fromBlock: QuantityLike | BlockTag, toBlock: QuantityLike | BlockTag): Promise<"+t+"EventCollection> {"),h.push("        const events = await this._contractInterface.findEvents(fromBlock, toBlock);"),h.push("        return new "+t+"EventCollection(events);"),h.push("    }"),h.push("}"),h.push(""),h.push("export type "+t+"EventType = "+(s.eventTypes.map(function(t){return JSON.stringify(t)}).join(" | ")||'"string"')+";"),h.push(""),h.push("export class "+t+"EventCollection {"),h.push("    public events: SmartContractEvent[];"),h.push("    constructor(events: SmartContractEvent[]) {"),h.push("        this.events = events;"),h.push("    }"),h.push(""),h.push("    public length(): number {"),h.push("        return this.events.length"),h.push("    }"),h.push(""),h.push("    public getEventType(index: number): "+t+"EventType {"),h.push("        return <any>this.events[index].name"),h.push("    }"),h.push(""),h.push("    public filter(eventType: "+t+"EventType): "+t+"EventCollection {"),h.push("        return new "+t+"EventCollection(this.events.filter(event => event.name === eventType));"),h.push("    }");for(a=0;a<s.eventFn.length;a++)h.push(""),h.push(s.eventFn[a]);h.push("}");for(a=0;a<s.eventStruct.length;a++)h.push(""),h.push(s.eventStruct[a]);return h.push(""),h.push("const CONTRACT_ABI: ABILike = "+JSON.stringify(e,null,"    ")+";"),h.join("\n")+"\n"}function makeDeployFunction(t,e,n,s,r){var i=[],u=makeFunctionParams(t.inputs,e);return t.payable&&(e.imports.QuantityLike=!0,u.push("value: QuantityLike")),e.imports.BytesLike=!0,u.push("bytecode: BytesLike"),e.imports.TransactionSendingOptions=!0,u.push("options: TransactionSendingOptions"),e.imports.deploySmartContract=!0,i.push("public static async deploy("+u.join(", ")+"): Promise<"+n+"> {"),i.push("    const deployed = await deploySmartContract(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+", options);"),i.push("    if (deployed.receipt.status > BigInt(0)) {"),i.push("        return new "+n+"(deployed.result, options);"),i.push("    } else {"),i.push('        throw new Error("Transaction reverted");'),i.push("    }"),i.push("}"),r||(i.push(""),e.imports.getTxBuildDetailsForDeploy=!0,i.push("public static getDeployTxBuildDetails("+u.slice(0,u.length-1).join(", ")+"): TransactionBuildDetails {"),i.push("    return getTxBuildDetailsForDeploy(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+");"),i.push("}")),i.map(function(t){return s+t}).join("\n")}function makeFunctionParams(t,n){return t.map(function(t,e){return(t.name||"param_"+e)+": "+getABITypescriptType(t.type,n,!0)})}function getCallArgumentsList(t){return t.inputs.map(function(t,e){return t.name||"param_"+e}).join(", ")}function getABITypescriptType(t,e,n){var s,r=/\[([0-9]+)?\]$/.exec(t+="");if(r?(s=!0,t=t.substr(0,t.length-r[0].length)):s=!1,"address"===t)return n?(e.imports.AddressLike=!0,"AddressLike"+(s?"[]":"")):(e.imports.Address=!0,"Address"+(s?"[]":""));if("string"===t)return"string"+(s?"[]":"");if("bool"===t)return"boolean"+(s?"[]":"");if(/^(u)?int([0-9]+)?$/.test(t))return n?(e.imports.QuantityLike=!0,"QuantityLike"+(s?"[]":"")):(e.imports.Quantity=!0,"Quantity"+(s?"[]":""));if(/^bytes([0-9]+)?$/.test(t))return n?(e.imports.BytesLike=!0,"BytesLike"+(s?"[]":"")):"string"+(s?"[]":"");if(/^\(.*\)$/.test(t)){for(var i=t.substr(1,t.length-1),u="",p=0,a=[],o=0;o<i.length;o++){var c=i.charAt(o);"("===c?(u+=c,p++):")"===c?(u+=c,p--):","===c&&0===p?(a.push(u),u=""):u+=c}return u&&a.push(u),"["+a.map(function(t){return getABITypescriptType(t,e,n)}).join(", ")+"]"}}function makeFunctionResultType(t,e,n){return"void"===e?"void":"single"===e?getABITypescriptType(t[0].type,n,!1):"tuple"===e?"["+t.map(function(t){return getABITypescriptType(t.type,n,!1)}).join(", ")+"]":"struct"===e?"{"+t.map(function(t){return t.name+": "+getABITypescriptType(t.type,n,!1)}).join(", ")+"}":"any"}function makeViewFunction(t,e,n,s,r){var i=[],u=makeFunctionParams(t.inputs,e);if(e.imports.MethodCallingOptions=!0,u.push("options?: MethodCallingOptions"),0===t.outputs.length)p="void";else if(1===t.outputs.length)p="single";else for(var p="struct",a=0;a<t.outputs.length;a++)if(!t.outputs[a].name){p="tuple";break}var o=t.name;if(s&&(o+="__"+r[t.name],r[t.name]++,e.imports.FunctionFragment=!0),i.push("public async "+o+"("+u.join(", ")+"): Promise<"+makeFunctionResultType(t.outputs,p,e)+"> {"),i.push("    "+("void"===p?"":"const __r: any = ")+"await this._contractInterface.callViewMethod("+sanitizeMethodEntry(t,s)+", ["+getCallArgumentsList(t)+"], options || {});"),"single"===p)i.push("    return __r[0]");else if("tuple"===p)i.push("    return __r");else if("struct"===p){i.push("    return {");for(a=0;a<t.outputs.length;a++){var c=t.outputs[a];i.push("        "+c.name+": __r["+a+"],")}i.push("    };")}return i.push("}"),i.map(function(t){return n+t}).join("\n")}function makeTransactionFunction(t,e,n,s,r,i,u){var p=[],s=s+"EventCollection",a=makeFunctionParams(t.inputs,e),o=(t.payable&&(e.imports.QuantityLike=!0,a.push("value: QuantityLike")),e.imports.MethodTransactionOptions=!0,a.push("options: MethodTransactionOptions"),e.imports.SmartContractEvent=!0,e.imports.TransactionResult=!0,t.name);return r&&(o+="__"+i[t.name],i[t.name]++,e.imports.FunctionFragment=!0),p.push("public async "+o+"("+a.join(", ")+"): Promise<TransactionResult<"+s+">> {"),t.payable?p.push("    const __r = await this._contractInterface.callPayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value, options);"):p.push("    const __r = await this._contractInterface.callMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], options);"),p.push(""),p.push("    if (__r.receipt.status > BigInt(0)) {"),p.push("        const decodedEvents = this._contractInterface.parseTransactionLogs(__r.receipt.logs)"),p.push("        return { receipt: __r.receipt, result: new "+s+"(decodedEvents) };"),p.push("    } else {"),p.push('        throw new Error("Transaction reverted");'),p.push("    }"),p.push("}"),u||(p.push(""),p.push("public "+o+"$txBuildDetails("+a.slice(0,a.length-1).join(", ")+"): TransactionBuildDetails {"),t.payable?p.push("    return this._contractInterface.encodePayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value);"):p.push("    return this._contractInterface.encodeMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"]);"),p.push("}")),p.map(function(t){return n+t}).join("\n")}function makeEventStruct(t,e,n){var s=[];s.push("export interface "+t.name+"Event {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("    "+(i.name||"_"+r)+": "+getABITypescriptType(i.type,e,!1)+",")}return s.push("}"),s.map(function(t){return n+t}).join("\n")}function makeEventFunc(t,e,n){var s=[];e.imports.SmartContractEventWrapper=!0,e.imports.SmartContractEvent=!0,s.push("public get"+t.name+"Event(index: number): SmartContractEventWrapper<"+t.name+"Event> {"),s.push("    const __r: any = this.events[index].parameters;"),s.push("    return {"),s.push("        event: this.events[index],"),s.push("        data: {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("            "+i.name+": __r["+r+"],")}return s.push("        },"),s.push("    };"),s.push("}"),s.map(function(t){return n+t}).join("\n")}function sanitizeMethodEntry(t,e){return e?"FunctionFragment.fromObject("+JSON.stringify(t)+")":JSON.stringify(t.name)}