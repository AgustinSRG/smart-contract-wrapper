function generateWrapper(t,e,n){for(var s={imports:{},deployFn:"",viewFn:[],txFn:[],eventFn:[],eventStruct:[],eventTypes:[]},r=t+"Wrapper",i=Object.create(null),p=Object.create(null),u=Object.create(null),a=0;a<e.length;a++)"function"===(o=e[a]).type&&(u[o.name]&&(i[o.name]=!0,p[o.name]=0),u[o.name]=!0);for(var o,c=!1,a=0;a<e.length;a++)"constructor"===(o=e[a]).type?(c=!0,s.deployFn=makeDeployFunction(o,s,r,"    ",n)):"function"===o.type?"view"===o.stateMutability||"pure"===o.stateMutability?s.viewFn.push(makeViewFunction(o,s,"    ",i[o.name],p)):s.txFn.push(makeTransactionFunction(o,s,"    ",t,i[o.name],p,n)):"event"===o.type&&(s.eventTypes.push(o.name),s.eventStruct.push(makeEventStruct(o,s,"")),s.eventFn.push(makeEventFunc(o,s,"    ")));c||(s.deployFn=makeDeployFunction({inputs:[],stateMutability:"nonpayable",type:"constructor"},s,r,"    ",n)),s.imports.SmartContractInterface=!0,n||(s.imports.TransactionBuildDetails=!0),s.imports.AddressLike=!0,s.imports.Address=!0,s.imports.QuantityLike=!0,s.imports.BlockTag=!0,s.imports.RPCOptions=!0,s.imports.ABILike=!0,s.imports.SmartContractEvent=!0;var h=[];h.push("// "+t+" contract wrapper"),h.push(""),h.push('"use strict";'),h.push(""),h.push("import { "+Object.keys(s.imports).join(", ")+' } from "@asanrom/smart-contract-wrapper";'),h.push(""),h.push("export class "+r+" {"),h.push("    public address: Address;"),h.push("    private _contractInterface: SmartContractInterface;"),h.push(""),h.push(s.deployFn),h.push(""),h.push("    constructor(address: AddressLike, rpcOptions: RPCOptions) {"),h.push("        this._contractInterface = new SmartContractInterface(address, CONTRACT_ABI, rpcOptions);"),h.push("        this.address = this._contractInterface.address;"),h.push("    }");for(a=0;a<s.viewFn.length;a++)h.push(""),h.push(s.viewFn[a]);for(a=0;a<s.txFn.length;a++)h.push(""),h.push(s.txFn[a]);h.push(""),h.push("    public async findEvents(fromBlock: QuantityLike | BlockTag, toBlock: QuantityLike | BlockTag): Promise<"+t+"EventCollection> {"),h.push("        const events = await this._contractInterface.findEvents(fromBlock, toBlock);"),h.push("        return new "+t+"EventCollection(events);"),h.push("    }"),h.push("}"),h.push(""),h.push("export type "+t+"EventType = "+(s.eventTypes.map(function(t){return JSON.stringify(t)}).join(" | ")||'"string"')+";"),h.push(""),h.push("export class "+t+"EventCollection {"),h.push("    public events: SmartContractEvent[];"),h.push("    constructor(events: SmartContractEvent[]) {"),h.push("        this.events = events;"),h.push("    }"),h.push(""),h.push("    public length(): number {"),h.push("        return this.events.length"),h.push("    }"),h.push(""),h.push("    public getEventType(index: number): "+t+"EventType {"),h.push("        return <any>this.events[index].name"),h.push("    }"),h.push(""),h.push("    public filter(eventType: "+t+"EventType): "+t+"EventCollection {"),h.push("        return new "+t+"EventCollection(this.events.filter(event => event.name === eventType));"),h.push("    }");for(a=0;a<s.eventFn.length;a++)h.push(""),h.push(s.eventFn[a]);h.push("}");for(a=0;a<s.eventStruct.length;a++)h.push(""),h.push(s.eventStruct[a]);return h.push(""),h.push("const CONTRACT_ABI: ABILike = "+JSON.stringify(e,null,"    ")+";"),h.join("\n")+"\n"}function makeDeployFunction(t,e,n,s,r){var i=[],p=makeFunctionParams(t.inputs,e);return t.payable&&(e.imports.QuantityLike=!0,p.push("value: QuantityLike")),e.imports.BytesLike=!0,p.push("bytecode: BytesLike"),e.imports.TransactionSendingOptions=!0,p.push("options: TransactionSendingOptions"),e.imports.deploySmartContract=!0,i.push("public static async deploy("+p.join(", ")+"): Promise<"+n+"> {"),i.push("    const deployed = await deploySmartContract(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+", options);"),i.push("    if (deployed.receipt.status > BigInt(0)) {"),i.push("        return new "+n+"(deployed.result, options);"),i.push("    } else {"),i.push('        throw new Error("Transaction reverted");'),i.push("    }"),i.push("}"),r||(i.push(""),e.imports.getTxBuildDetailsForDeploy=!0,i.push("public static getDeployTxBuildDetails("+p.slice(0,p.length-1).join(", ")+"): TransactionBuildDetails {"),i.push("    return getTxBuildDetailsForDeploy(bytecode, CONTRACT_ABI, ["+getCallArgumentsList(t)+"], "+(t.payable?"value":"0")+");"),i.push("}")),i.map(function(t){return s+t}).join("\n")}function makeFunctionParams(t,n){return t.map(function(t,e){return(t.name||"param_"+e)+": "+getABITypescriptType(t,n,!0)})}function getCallArgumentsList(t){return t.inputs.map(function(t,e){return t.name||"param_"+e}).join(", ")}function getABITypescriptType(t,n,s){let e=t.type+"";var r,i=/\[([0-9]+)?\]$/.exec(e);return i?(r=!0,e=e.substr(0,e.length-i[0].length)):r=!1,"address"===e?s?(n.imports.AddressLike=!0,"AddressLike"+(r?"[]":"")):(n.imports.Address=!0,"Address"+(r?"[]":"")):"string"===e?"string"+(r?"[]":""):"bool"===e?"boolean"+(r?"[]":""):/^(u)?int([0-9]+)?$/.test(e)?s?(n.imports.QuantityLike=!0,"QuantityLike"+(r?"[]":"")):(n.imports.Quantity=!0,"Quantity"+(r?"[]":"")):/^bytes([0-9]+)?$/.test(e)?s?(n.imports.BytesLike=!0,"BytesLike"+(r?"[]":"")):"string"+(r?"[]":""):"tuple"===e&&t.components?"["+t.components.map(function(t,e){return(t.name||"t_"+e)+": "+getABITypescriptType(t,n,s)}).join(", ")+"]"+(r?"[]":""):void 0}function makeFunctionResultType(t,e,n){return"void"===e?"void":"single"===e?getABITypescriptType(t[0],n,!1):"tuple"===e?"["+t.map(function(t){return getABITypescriptType(t,n,!1)}).join(", ")+"]":"struct"===e?"{"+t.map(function(t){return t.name+": "+getABITypescriptType(t,n,!1)}).join(", ")+"}":"any"}function makeViewFunction(t,e,n,s,r){var i=[],p=makeFunctionParams(t.inputs,e);if(e.imports.MethodCallingOptions=!0,p.push("options?: MethodCallingOptions"),0===t.outputs.length)u="void";else if(1===t.outputs.length)u="single";else for(var u="struct",a=0;a<t.outputs.length;a++)if(!t.outputs[a].name){u="tuple";break}var o=t.name;if(s&&(o+="__"+r[t.name],r[t.name]++,e.imports.FunctionFragment=!0),i.push("public async "+o+"("+p.join(", ")+"): Promise<"+makeFunctionResultType(t.outputs,u,e)+"> {"),i.push("    "+("void"===u?"":"const __r: any = ")+"await this._contractInterface.callViewMethod("+sanitizeMethodEntry(t,s)+", ["+getCallArgumentsList(t)+"], options || {});"),"single"===u)i.push("    return __r[0]");else if("tuple"===u)i.push("    return __r");else if("struct"===u){i.push("    return {");for(a=0;a<t.outputs.length;a++){var c=t.outputs[a];i.push("        "+c.name+": __r["+a+"],")}i.push("    };")}return i.push("}"),i.map(function(t){return n+t}).join("\n")}function makeTransactionFunction(t,e,n,s,r,i,p){var u=[],s=s+"EventCollection",a=makeFunctionParams(t.inputs,e),o=(t.payable&&(e.imports.QuantityLike=!0,a.push("value: QuantityLike")),e.imports.MethodTransactionOptions=!0,a.push("options: MethodTransactionOptions"),e.imports.SmartContractEvent=!0,e.imports.TransactionResult=!0,t.name);return r&&(o+="__"+i[t.name],i[t.name]++,e.imports.FunctionFragment=!0),u.push("public async "+o+"("+a.join(", ")+"): Promise<TransactionResult<"+s+">> {"),t.payable?u.push("    const __r = await this._contractInterface.callPayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value, options);"):u.push("    const __r = await this._contractInterface.callMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], options);"),u.push(""),u.push("    if (__r.receipt.status > BigInt(0)) {"),u.push("        const decodedEvents = this._contractInterface.parseTransactionLogs(__r.receipt.logs)"),u.push("        return { receipt: __r.receipt, result: new "+s+"(decodedEvents) };"),u.push("    } else {"),u.push('        throw new Error("Transaction reverted");'),u.push("    }"),u.push("}"),p||(u.push(""),u.push("public "+o+"$txBuildDetails("+a.slice(0,a.length-1).join(", ")+"): TransactionBuildDetails {"),t.payable?u.push("    return this._contractInterface.encodePayableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"], value);"):u.push("    return this._contractInterface.encodeMutableMethod("+sanitizeMethodEntry(t,r)+", ["+getCallArgumentsList(t)+"]);"),u.push("}")),u.map(function(t){return n+t}).join("\n")}function makeEventStruct(t,e,n){var s=[];s.push("export interface "+t.name+"Event {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("    "+(i.name||"_"+r)+": "+getABITypescriptType(i,e,!1)+",")}return s.push("}"),s.map(function(t){return n+t}).join("\n")}function makeEventFunc(t,e,n){var s=[];e.imports.SmartContractEventWrapper=!0,e.imports.SmartContractEvent=!0,s.push("public get"+t.name+"Event(index: number): SmartContractEventWrapper<"+t.name+"Event> {"),s.push("    const __r: any = this.events[index].parameters;"),s.push("    return {"),s.push("        event: this.events[index],"),s.push("        data: {");for(var r=0;r<t.inputs.length;r++){var i=t.inputs[r];s.push("            "+i.name+": __r["+r+"],")}return s.push("        },"),s.push("    };"),s.push("}"),s.map(function(t){return n+t}).join("\n")}function sanitizeMethodEntry(t,e){return e?"FunctionFragment.from("+JSON.stringify(t)+")":JSON.stringify(t.name)}